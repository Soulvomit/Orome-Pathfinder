     1                                  ;Author:	Jonas Brown
     2                                  ;Date:		27/12-2016
     3                                  ;File: 		Data.asm
     4                                  
     5                                  [BITS 64]
     6                                  [SECTION .data]
     7                                  ;Node
     8                                  [GLOBAL Node.Position.Y]
     9                                  [GLOBAL Node.Position.X]
    10                                  [GLOBAL Node.Resistance]
    11                                  [GLOBAL Node.Closed]
    12                                  [GLOBAL Node.GCost]
    13                                  [GLOBAL Node.HCost]
    14                                  [GLOBAL Node.FCost]
    15                                  [GLOBAL Node.ID]
    16                                  [GLOBAL Node.PParent]
    17                                  [GLOBAL Node.PNext]
    18                                  [GLOBAL Node.Size]
    19                                  [GLOBAL Node.AdjecentOffsets]
    20                                  ;NodeStack
    21                                  [GLOBAL NodeStack.Top]
    22                                  [GLOBAL NodeStack.Bottom]
    23                                  [GLOBAL NodeStack.Count]
    24                                  ;NodeOpenList
    25                                  [GLOBAL NodeOpenList.First]
    26                                  [GLOBAL NodeOpenList.Last]
    27                                  [GLOBAL NodeOpenList.Count]
    28                                  ;Grid
    29                                  [GLOBAL Grid.IncludeDiagonals]
    30                                  [GLOBAL Grid.StartX]
    31                                  [GLOBAL Grid.StartY]
    32                                  [GLOBAL Grid.PStartNode]
    33                                  [GLOBAL Grid.TargetX]
    34                                  [GLOBAL Grid.TargetY]
    35                                  [GLOBAL Grid.PMap]
    36                                  [GLOBAL Grid.MapWidth]
    37                                  [GLOBAL Grid.MapHeight]
    38                                  [GLOBAL Grid.POutBuffer]
    39                                  [GLOBAL Grid.OutBufferSize]
    40                                  [GLOBAL Grid.Size]
    41                                  [DEFAULT REL]
    42                                  ALIGN 8
    43                                  
    44                                  ;per node data accessors:
    45                                  Node:
    46                                  	;imm const: offsets accessors: 2d related
    47                                  	.Position.Y:	equ 	54		;8*6+6 	= 54
    48                                  	.Position.X:	equ 	52		;8*6+4 	= 52
    49                                  	;imm const: offsets accessors: general
    50                                  	.Resistance:	equ		50		;8*6+2 	= 50
    51                                  	.Closed:		equ		48		;8*6 	= 48
    52                                  	.GCost:			equ		40		;8*5 	= 40
    53                                  	.HCost:			equ		32		;8*4 	= 32
    54                                  	.FCost:			equ 	24		;8*3 	= 24
    55                                  	.ID: 			equ 	16		;8*2 	= 16
    56                                  	.PParent:		equ 	8		;8*1 	= 8
    57                                  	.PNext			equ		0		;8*0 	= 0
    58                                  	;imm const: offsets accessors: size of a node
    59                                  	.Size:			equ 	56		;8*7	= 56
    60                                  	;const static data: base cost of traversing a node
    61 00000000 01000000FFFF000000-     	.AdjecentOffsets:	dw 		1,0, -1,0, 0,1, 0,-1, 1,1, 1,-1, -1,1, -1,-1
    61 00000009 0001000000FFFF0100-
    61 00000012 01000100FFFFFFFF01-
    61 0000001B 00FFFFFFFF         
    62                                  
    63                                  ;per execution unit data accessors:	
    64                                  ;stack alignment need - add 2 shadow bytes			
    65                                  NodeStack:
    66                                  	;imm const: offsets accessors: the topmost node on stack
    67                                  	.Top:			equ		0 	;8*0 	= 0
    68                                  	;imm const: offsets accessors: bottom node on stack
    69                                  	.Bottom:		equ		8	;8*1 	= 8
    70                                  	;imm const: number of nodes on the stack
    71                                  	.Count:			equ		16	;8*2 	= 16
    72                                  
    73                                  NodeOpenList:
    74                                  	;imm const: offsets accessors: the fist node in open list
    75                                  	.First:			equ		24	;8*3 	= 24
    76                                  	;imm const: offsets accessors: the last node in open list
    77                                  	.Last:			equ		32	;8*4 	= 32
    78                                  	;imm const: offsets accessors: number of nodes in open list
    79                                  	.Count:			equ		40	;8*5 	= 40
    80                                  
    81                                  Grid:
    82                                  	;imm const: offsets accessors: grid
    83                                  	.IncludeDiagonals	equ		48	;8*6	= 48
    84                                  	.StartX:			equ 	50	;8*6+2	= 50
    85                                  	.StartY:			equ 	52	;8*6+4	= 52
    86                                  	.TargetX:			equ 	54	;8*6+6	= 54
    87                                  	.TargetY:			equ 	56	;8*7	= 56
    88                                  	.MapWidth:			equ		58	;8*7+2	= 58
    89                                  	.MapHeight:			equ 	60	;8*7+4	= 60
    90                                  	.OutBufferSize: 	equ 	62	;8*7+6	= 62	
    91                                  	.POutBuffer: 		equ 	64	;8*8	= 64
    92                                  	.PMap				equ 	72	;8*9	= 72
    93                                  	.PStartNode:		equ 	80	;8*10	= 80
    94                                  	.Size:				equ 	88	;8*11 	= 88
